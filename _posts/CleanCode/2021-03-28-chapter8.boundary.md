---
title: "í´ë¦°ì½”ë“œ 8ì¥. ê²½ê³„"
categories:
  - CleanCode
last_modified_at: 2021-03-28T22s:00:00+09:00
toc_sticky: true
toc: true
comments: true
---
## ì œ 8ì¥. ê²½ê³„

### ğŸ“Œì™¸ë¶€ ì½”ë“œ ì‚¬ìš©í•˜ê¸°

Mapì€ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ì§€ë§Œ, ììœ ë„ ë§Œí¼ ìœ„í—˜ë„ê°€ í¬ë‹¤.

- ex. Map.clear() ë©”ì„œë“œë¡œ ëˆ„êµ¬ë“  ì§€ìš¸ ê¶Œí•œì´ ìˆë‹¤.

- ex. ì„¤ê³„ ì‹œ íŠ¹ì • ìœ í˜•ë§Œ Mapì— ì €ì¥í•˜ê¸°ë¡œ ê²°ì • â†’ í•˜ì§€ë§Œ Mapì€ ê°ì²´ ìœ í˜•ì„ ì œí•œí•˜ì§€ ì•Šì•„ ì–´ë–¤ ìœ í˜•ì´ë“  ì¶”ê°€ ê°€ëŠ¥


Sensorë¼ëŠ” ê°ì²´ë¥¼ ë‹´ëŠ” Mapì„ ë§Œë“¤ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ Mapì„ ìƒì„±í•œë‹¤. Mapì´ ë°˜í™˜í•˜ëŠ” Objectë¥¼ ì˜¬ë°”ë¥¸ ìœ í˜•ìœ¼ë¡œ ë³€í™˜í•  ì±…ì„ì€ í´ë¼ì´ì–¸íŠ¸ì— ìˆë‹¤.

```java
//bad
Map sensors = new HashMap();
Sensor s = (Sensor)sensors.get(sensorId);
```



ì œë„¤ë¦­ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì¸ ì½”ë“œì´ë‹¤. í•˜ì§€ë§Œ ì‚¬ìš©ìì—ê²Œ í•„ìš”ì—†ëŠ” Mapì˜ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤ëŠ”ê±´ ë³€í•¨ ì—†ë‹¤.

Map<String, Sensor> ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—¬ê¸°ì €ê¸° ë„˜ê¸´ë‹¤ë©´, Mapì˜ ì¸í„°í˜ì´ìŠ¤ê°€ ë³€í•œ ê²½ìš° ìˆ˜ì •í•  ì½”ë“œê°€ ë§ì•„ì§„ë‹¤.

```java
//soso
Map<String, Sensor> sensors = new HashMap<Sensor>();
Sensor s = sensors.get(sensorId);
```



ë‹¤ìŒì€ Mapì„ ì¢€ ë” ê¹”ë”í•˜ê²Œ ì‚¬ìš©í•œ ì½”ë“œë‹¤. ì œë„¤ë¦­ìŠ¤ ì‚¬ìš© ì—¬ë¶€ëŠ” Sensors ì•ˆì—ì„œ ê²°ì •ë˜ì„œ ì‚¬ìš©ìê°€ ì•Œ í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤.

ê²½ê³„ ì¸í„°í˜ì´ìŠ¤ì¸ Mapì„ Sensors ì•ˆìœ¼ë¡œ ìˆ¨ê¸´ë‹¤.  Map ì¸í„°í˜ì´ìŠ¤ê°€ ë³€í•˜ë”ë¼ë„ ë‚˜ë¨¸ì§€ í”„ë¡œê·¸ë¨ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

```java
//good
public class Sensors = {
    private Map sensors = new HashMap();
    
    public Sensor getById(String id) {
        return (Sensor) sensors.get(id);
    }
}
```


Map í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ìº¡ìŠí™”ë¥¼ í•˜ë¼ëŠ” ê²Œ ì•„ë‹ˆê³ ,  Map ë˜ëŠ” ìœ ì‚¬í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì—¬ê¸°ì €ê¸° ë„˜ê¸°ì§€ ë§ë¼ëŠ” ëœ»ì´ë‹¤.

Mapê³¼ ê°™ì€ ê²½ê³„ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì´ë¥¼ ì´ìš©í•˜ëŠ” í´ë˜ìŠ¤ë‚˜ í´ë˜ìŠ¤ ê³„ì—´ ë°–ìœ¼ë¡œ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•œë‹¤.

Map ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µê°œ APIì˜ ì¸ìˆ˜ë¡œ ë„˜ê¸°ê±°ë‚˜ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.



### ğŸ“Œê²½ê³„ ì‚´í”¼ê³  ìµíˆê¸°

ì™¸ë¶€ ì½”ë“œ ì‚¬ìš© ì „, ìš°ë¦¬ ìª½ ì½”ë“œë¥¼ ë¨¼ì € ì‘ì„±í•˜ì.  ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì™¸ë¶€ ì½”ë“œë¥¼ ìµíˆëŠ” ê²ƒì´ê³  ì´ë¥¼ **í•™ìŠµ í…ŒìŠ¤íŠ¸**ë¼ê³  í•œë‹¤.

í•™ìŠµ í…ŒìŠ¤íŠ¸ëŠ” APIë¥¼ ì‚¬ìš©í•˜ë ¤ëŠ” ëª©ì ì— ì´ˆì ì„ ë§ì¶˜ë‹¤.

#### log4j ìµíˆê¸°

1. ê²½ê³„ ì‚´í”¼ê³  ìµíˆê¸°ì˜ ì˜ˆì‹œë¡œ ì•„íŒŒì¹˜ì˜ log4 íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•œë‹¤. ë¬¸ì„œë¥¼ ìì„¸íˆ ì½ê¸° ì „ ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•œë‹¤.

   ```java
   @Test
   public void testLogCreate() {
       Logger logger = Logger.getLogger("MyLogger");
       logger.info("hello");
   }
   ```

   

2. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ëŒë¦¬ë©´ Appenderë¼ëŠ” ë­”ê°€ê°€ í•„ìš”í•˜ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.  
   ë¬¸ì„œì—” ConsoleAppenderë¼ëŠ” í´ë˜ìŠ¤ê°€ ìˆì–´ ConsoleAppenderë¥¼ ìƒì„±í•œ í›„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë‹¤ì‹œ ëŒë¦°ë‹¤.

   ```java
   @Test
   public void testLogCreate() {
       Logger logger = Logger.getLogger("MyLogger");
       ConsoleAppender appender = new ConsoleAppender();
       logger.addAppender(appender);
       logger.info("hello");
   }
   ```

   

3. ì´ë²ˆì—ëŠ” Appenderì— ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì´ ì—†ë‹¤ëŠ” ì‚¬ì‹¤ì„ ë°œê²¬í•œë‹¤. êµ¬ê¸€ ê²€ìƒ‰ í›„ ë‹¤ìŒê³¼ ê°™ì´ ì‹œë„í•œë‹¤.

   ```java
   @Test
   public void testLogCreate() {
       Logger logger = Logger.getLogger("MyLogger");
       logger.removeAllAppenders();
       logger.addAppender(new ConsoleAppender(
         new PatternLayout("%p %t %m%n"), ConsoleAppender.SYSTEM_OUT
       ));
       logger.info("hello");
   }
   ```

   

4. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ ë²ˆ ì§œë©´ì„œ log4 ë™ì‘ì„ ì´í•´í•˜ê³  ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

   ```java
    public class LogTest {
        private Logger logger;
   
        @Before
        public void initialize() {
            logger = Logger.getLogger("logger");
            logger.removeAllAppenders();
            Logger.getRootLogger().removeAllAppenders();
        }
   
        @Test
        public void basicLogger() {
            BasicConfigurator.configure();
            logger.info("basicLogger");
        }
   
        @Test
        public void addAppenderWithStream() {
            logger.addAppender(new ConsoleAppender(
                new PatternLayout("%p %t %m%n"),
                ConsoleAppender.SYSTEM_OUT));
            logger.info("addAppenderWithStream");
        }
   
        @Test
        public void addAppenderWithoutStream() {
            logger.addAppender(new ConsoleAppender(
                new PatternLayout("%p %t %m%n")));
            logger.info("addAppenderWithoutStream");
        }
    }
   ```

   



### ğŸ“Œí•™ìŠµ í…ŒìŠ¤íŠ¸ëŠ” ê³µì§œ ì´ìƒì´ë‹¤

### ğŸ“Œì•„ì§ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê¸°

### ğŸ“Œê¹¨ë—í•œ ê²½ê³„





### 
